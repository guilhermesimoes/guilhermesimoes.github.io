<!DOCTYPE html>
<meta charset="utf-8">
<style>
html, body {
  height: 100%;
  margin: 0;
}

.container {
  height: 100%;
  display: flex;
  justify-content: space-evenly;
  align-items: center;
}

input[type="checkbox"] {
  margin: 0;
  width: 10em;
  height: 10em;
}
</style>
<body>
<div class="container">
  <handdrawn-checkbox><input type="checkbox" checked /></handdrawn-checkbox>

  <handdrawn-checkbox></handdrawn-checkbox>
</div>

<script type="text/javascript">
"use strict";

var template = document.createElement('template');

template.innerHTML = `
  <style>
    :host {
      position: relative;
      display: inline-block;
    }

    :host svg {
      position: absolute;
      pointer-events: none;
      border: 1px solid black;
    }

    ::slotted(input) {
      opacity: 0;
    }
  </style>
  <svg viewbox="0 0 10 10" stroke="currentColor">
    <path></path>
    <path></path>
  </svg>
  <slot></slot>
`;

function toggleVisibility(lines, checkbox) {
  var visible = checkbox.checked;
  var line1 = lines[0];
  var line2 = lines[1];

  if (visible) {
    line1.setAttribute('d', 'M1 1L9 9');
    line2.setAttribute('d', 'M9 1L1 9');
    line1.style.strokeDasharray = line1.style.strokeDashoffset = line1.getTotalLength();
    line2.style.strokeDasharray = line2.style.strokeDashoffset = line2.getTotalLength();

    setTimeout(() => {
      line1.style.transition = line2.style.transition = 'stroke-dashoffset 200ms ease';
      line2.style['transition-delay'] = '200ms';
      line1.style.strokeDashoffset = line2.style.strokeDashoffset = 0;
    }, 10);
  } else {
    line1.style.strokeDashoffset = line1.getTotalLength();
    line2.style.strokeDashoffset = line2.getTotalLength();
  }
}

class HandDrawnCheckbox extends HTMLElement {
  constructor() {
    super();
    var checkbox = this.querySelector('input[type="checkbox"]');
    if (!checkbox) {
      var defaultCheckbox = document.createElement('input');
      defaultCheckbox.setAttribute('type', 'checkbox');
      this.appendChild(defaultCheckbox);
    }
  }

  connectedCallback() {
    var checkbox = this.querySelector('input[type="checkbox"]');
    var templateClone = template.content.cloneNode(true);
    var svgEl = templateClone.querySelector('svg');
    var pathEls = svgEl.querySelectorAll('path');
    toggleVisibility(pathEls, checkbox);

    var shadowRoot = this.attachShadow({ mode: 'open' });
    shadowRoot.appendChild(templateClone);

    svgEl.style.width = checkbox.clientWidth;

    checkbox.addEventListener('change', function() {
      toggleVisibility(pathEls, this)
    });
  }
}

customElements.define('handdrawn-checkbox', HandDrawnCheckbox);
</script>
</body>
