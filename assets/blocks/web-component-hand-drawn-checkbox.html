<!DOCTYPE html>
<meta charset="utf-8">
<style>
html, body {
  height: 100%;
  margin: 0;
}

.container {
  height: 100%;
  display: flex;
  justify-content: space-evenly;
  align-items: center;
}

input[type="checkbox"] {
  margin: 0;
  width: 10em;
  height: 10em;
}
</style>
<body>
<div class="container">
  <handdrawn-checkbox><input type="checkbox" /></handdrawn-checkbox>

  <handdrawn-checkbox></handdrawn-checkbox>
</div>

<script type="text/javascript">
"use strict";

var template = document.createElement('template');

template.innerHTML = `
  <style>
    :host {
      position: relative;
      display: inline-block;
    }

    :host svg {
      position: absolute;
      pointer-events: none;
      border: 1px solid black;
    }

    ::slotted(input) {
      opacity: 0;
    }

    .line {
      stroke-dasharray: 12;
      stroke-dashoffset: 12;
      transition: stroke-dashoffset 200ms ease;
    }

    .line--second {
      transition-delay: 200ms;
    }

    .checked {
      stroke-dashoffset: 0;
    }
  </style>
  <svg viewbox="0 0 10 10" stroke="currentColor">
    <path d="M1 1L9 9" class="line line--first"></path>
    <path d="M9 1L1 9" class="line line--second"></path>
  </svg>
  <slot></slot>
`;

function toggleVisibility(targets, checkbox) {
  targets.forEach(target => {
    target.classList.toggle('checked', checkbox.checked);
  });
}

class HandDrawnCheckbox extends HTMLElement {
  constructor() {
    super();
    var checkbox = this.querySelector('input[type="checkbox"]');
    if (!checkbox) {
      var defaultCheckbox = document.createElement('input');
      defaultCheckbox.setAttribute('type', 'checkbox');
      this.appendChild(defaultCheckbox);
    }
  }

  connectedCallback() {
    var checkbox = this.querySelector('input[type="checkbox"]');
    var templateClone = template.content.cloneNode(true);
    var svgEl = templateClone.querySelector('svg');
    var pathEls = svgEl.querySelectorAll('path');
    toggleVisibility(pathEls, checkbox);

    var shadowRoot = this.attachShadow({ mode: 'open' });
    shadowRoot.appendChild(templateClone);

    svgEl.style.width = checkbox.clientWidth;

    checkbox.addEventListener('change', function() {
      toggleVisibility(pathEls, this)
    });
  }
}

customElements.define('handdrawn-checkbox', HandDrawnCheckbox);
</script>
</body>
